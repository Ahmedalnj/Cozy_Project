# تحديث التحقق من رقم الحجز - Reservation Code Verification Update

## 🎯 التحديث المطلوب

تم إضافة نظام تحقق من رقم الحجز المكون من 8 أرقام عند قبول الحجز النقدي لزيادة الأمان.

## 🔧 الميزات المضافة

### 1. رقم الحجز المكون من 8 أرقام
- ✅ توليد رقم فريد لكل حجز نقدي
- ✅ عرض الرقم في Modal التحقق
- ✅ إرسال الرقم للضيف عبر البريد الإلكتروني

### 2. نظام التحقق
- ✅ حقل إدخال لرقم الحجز
- ✅ زر "تحقق" للتحقق من الرقم
- ✅ رسائل خطأ عند الرقم غير الصحيح
- ✅ تأكيد بصري عند التحقق الناجح

### 3. تحسينات الأمان
- ✅ تأكيد مزدوج (رقم الحجز + قبول)
- ✅ منع القبول بدون تحقق
- ✅ إعادة تعيين حالة التحقق عند تغيير الرقم

### 4. التصميم المحسن
- ✅ عرض رقم الحجز بوضوح
- ✅ ألوان مختلفة لحالات التحقق
- ✅ أيقونات مناسبة للأمان

## 🎨 التصميم الجديد

```
┌─────────────────────────────────┐
│         تأكيد قبول الحجز        │
├─────────────────────────────────┤
│           ✓                     │
│    هل أنت متأكد من قبول هذا     │
│      الحجز النقدي؟              │
│                               │
│ ┌─────────────────────────────┐ │
│ │ الضيف: أحمد محمد            │ │
│ │ العقار: شقة فاخرة           │ │
│ │ التواريخ: 15/12 - 20/12    │ │
│ │ 💰 $500 دفع نقدي            │ │
│ └─────────────────────────────┘ │
│                               │
│ 🛡️ التحقق مطلوب               │
│ للمتابعة، يرجى إدخال رقم الحجز │
│ المكون من 8 أرقام              │
│                               │
│ ┌─────────────────────────────┐ │
│ │ رقم الحجز                   │ │
│ │ 12345678                    │ │
│ └─────────────────────────────┘ │
│                               │
│ [أدخل رقم الحجز] [تحقق]      │
│                               │
│ ✅ تم التحقق بنجاح            │
│                               │
│ ⚠️ ملاحظة مهمة: بعد القبول،   │
│    سيتم تأكيد الحجز وإرسال     │
│    إشعار للضيف. تأكد من        │
│    استلام الدفع النقدي عند     │
│    وصول الضيف.                │
│                               │
│ [قبول الحجز] [إلغاء]         │
└─────────────────────────────────┘
```

## 🌐 الترجمات المضافة

### العربية:
- `verification_required`: "التحقق مطلوب"
- `verification_description`: "للمتابعة، يرجى إدخال رقم الحجز المكون من 8 أرقام الذي تم إرساله إلى الضيف"
- `reservation_code`: "رقم الحجز"
- `enter_reservation_code`: "أدخل رقم الحجز"
- `verify`: "تحقق"
- `verified`: "تم التحقق"
- `verification_successful`: "تم التحقق بنجاح"
- `invalid_reservation_code`: "رقم الحجز غير صحيح"

### الإنجليزية:
- `verification_required`: "Verification Required"
- `verification_description`: "To proceed, please enter the 8-digit reservation code that was sent to the guest"
- `reservation_code`: "Reservation Code"
- `enter_reservation_code`: "Enter reservation code"
- `verify`: "Verify"
- `verified`: "Verified"
- `verification_successful`: "Verification successful"
- `invalid_reservation_code`: "Invalid reservation code"

## 🔧 الملفات المحدثة

1. `app/components/modals/ConfirmAcceptModal.tsx` - إضافة نظام التحقق
2. `locales/locales/ar/common.json` - إضافة الترجمات العربية
3. `locales/locales/en/common.json` - إضافة الترجمات الإنجليزية
4. `app/reservations/ReservationsClient.tsx` - تمرير رقم الحجز
5. `prisma/schema.prisma` - إضافة حقل reservationCode

## 📱 كيفية الاستخدام

1. انتقل إلى صفحة الحجوزات (`/reservations`)
2. ابحث عن حجز نقدي معلق
3. اضغط على زر "قبول الدفع النقدي"
4. ستظهر modal مع تفاصيل الحجز ورقم الحجز
5. أدخل رقم الحجز واضغط "تحقق"
6. بعد التحقق الناجح، اضغط "قبول الحجز"

## 🔄 سير العمل

1. **الضغط على زر القبول** → فتح modal مع تفاصيل الحجز
2. **عرض رقم الحجز** → رقم مكون من 8 أرقام
3. **إدخال رقم الحجز** → في حقل التحقق
4. **التحقق من الرقم** → ضغط زر "تحقق"
5. **التأكيد البصري** → رسالة "تم التحقق بنجاح"
6. **قبول الحجز** → إرسال إلى API
7. **إرسال البريد** → للضيف مع تأكيد القبول

## 🎯 المزايا

- ✅ **أمان محسن** - تحقق مزدوج من رقم الحجز
- ✅ **منع الأخطاء** - لا يمكن القبول بدون تحقق
- ✅ **تجربة واضحة** - خطوات واضحة ومفهومة
- ✅ **تصميم جذاب** - ألوان وأيقونات مناسبة
- ✅ **رسائل واضحة** - تعليمات واضحة للمستخدم
- ✅ **دعم اللغات** - العربية والإنجليزية

## 🔒 ميزات الأمان

- **رقم فريد:** كل حجز له رقم مختلف
- **تحقق إجباري:** لا يمكن تخطي التحقق
- **إعادة تعيين:** التحقق يختفي عند تغيير الرقم
- **رسائل خطأ:** تنبيه عند الرقم غير الصحيح
- **تأكيد بصري:** إشارة واضحة للتحقق الناجح

---

**التحديث مكتمل! 🚀✨**
