# ูุธุงู ุงูุชููููุงุช - Reviews System

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชููููุงุช ุดุงูู ูููุดุฑูุน ูุณูุญ ูููุณุชุฎุฏููู ุจุชูููู ุงูุนูุงุฑุงุช ุงูุชู ุญุฌุฒููุง. ุงููุธุงู ูุฏุนู ุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.

## ุงูููุฒุงุช

### โ ุงูููุฒุงุช ุงูููุชููุฉ

1. **ุชูููู ุจุงููุฌูู (1-5 ูุฌูู)**
2. **ุชุนูููุงุช ูุตูุฉ ุงุฎุชูุงุฑูุฉ**
3. **ูุชูุณุท ุงูุชููููุงุช**
4. **ุนุฑุถ ุงูุชููููุงุช ูู ุจุทุงูุงุช ุงูุนูุงุฑุงุช**
5. **ุชุนุฏูู ูุญุฐู ุงูุชููููุงุช**
6. **ุฏุนู ุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ**
7. **ูุงุฌูุฉ ูุณุชุฎุฏู ุชูุงุนููุฉ**

### ๐ง ุงูููููุงุช

#### 1. **StarRating Component**
- ุนุฑุถ ุงููุฌูู ุงูุชูุงุนููุฉ
- ุฏุนู ุฃุญุฌุงู ูุฎุชููุฉ (sm, md, lg)
- ุนุฑุถ ุงููุต ุงููุตูู ููุชูููู
- ูุถุน ุงููุฑุงุกุฉ ููุท

#### 2. **ReviewForm Component**
- ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู ุงูุชููููุงุช
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุฏุนู ุงูุชุฑุฌูุฉ
- ุนุฑุถ ุญุงูุฉ ุงูุชุญููู

#### 3. **ReviewCard Component**
- ุนุฑุถ ุงูุชูููู ุงููุฑุฏู
- ูุนูููุงุช ุงููุณุชุฎุฏู
- ุชุงุฑูุฎ ุงูุชูููู
- ุฃุฒุฑุงุฑ ุงูุชุนุฏูู ูุงูุญุฐู

#### 4. **ReviewsSection Component**
- ุงููุณู ุงูุฑุฆูุณู ููุชููููุงุช
- ุฅุฏุงุฑุฉ ุฌููุน ุงูุชููููุงุช
- ุนุฑุถ ูุชูุณุท ุงูุชูููู
- ุฅุฏุงุฑุฉ ุงูููุงุฐุฌ

#### 5. **ReviewSummary Component**
- ููุฎุต ุงูุชููููุงุช ูู ุจุทุงูุงุช ุงูุนูุงุฑุงุช
- ูุชูุณุท ุงูุชูููู ูุนุฏุฏ ุงูุชููููุงุช
- ุชุญููู ุงูุจูุงูุงุช ุชููุงุฆูุงู

### ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ูููุฐุฌ Review
```prisma
model Review {
  id          String   @id @default(uuid()) @map("_id") @db.Uuid
  listingId   String   @map("listing_id") @db.Uuid
  userId      String   @map("user_id") @db.Uuid
  rating      Int      // 1-5 stars
  comment     String?  // Optional comment
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  listing     Listing  @relation(fields: [listingId], references: [id], onDelete: Cascade)
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([listingId, userId]) // One review per user per listing
  @@map("reviews")
}
```

### ๐ API Endpoints

#### 1. **GET /api/listings/[listingId]/reviews**
- ุฌูุจ ุฌููุน ุงูุชููููุงุช ูุนูุงุฑ ูุนูู
- ุชุฑุชูุจ ุญุณุจ ุงูุชุงุฑูุฎ (ุงูุฃุญุฏุซ ุฃููุงู)

#### 2. **POST /api/listings/[listingId]/reviews**
- ุฅูุดุงุก ุชูููู ุฌุฏูุฏ
- ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุชูููู ุณุงุจู ูููุณุชุฎุฏู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

#### 3. **PUT /api/reviews/[reviewId]**
- ุชุญุฏูุซ ุชูููู ููุฌูุฏ
- ุงูุชุญูู ูู ููููุฉ ุงูุชูููู

#### 4. **DELETE /api/reviews/[reviewId]**
- ุญุฐู ุชูููู
- ุงูุชุญูู ูู ููููุฉ ุงูุชูููู

### ๐จ ุงูุชุตููู

#### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ
- **ุงููุฌูู**: `text-yellow-400`
- **ุงูุฎูููุฉ ุงูุฒุฑูุงุก ููุชูููู ุงูุดุฎุตู**: `bg-blue-50`
- **ุงูุญุฏูุฏ**: `border-blue-200`

#### ุงูุฃุญุฌุงู
- **ุตุบูุฑ (sm)**: `text-xs`, `w-3 h-3`
- **ูุชูุณุท (md)**: `text-sm`, `w-4 h-4`
- **ูุจูุฑ (lg)**: `text-base`, `w-5 h-5`

### ๐ ุงูุชุฑุฌูุฉ

#### ุงูููุงุชูุญ ุงูุฑุฆูุณูุฉ
```json
{
  "reviews": {
    "title": "ุงูุชููููุงุช",
    "no_reviews": "ูุง ุชูุฌุฏ ุชููููุงุช ุจุนุฏ",
    "be_first": "ูู ุฃูู ูู ูููู ูุฐุง ุงูููุงู",
    "average_rating": "ูุชูุณุท ุงูุชูููู",
    "total_reviews": "ุฅุฌูุงูู ุงูุชููููุงุช",
    "write_review": "ุงูุชุจ ุชููููุงู",
    "edit_review": "ุนุฏู ุชููููู",
    "rating": "ุงูุชูููู",
    "comment": "ุงูุชุนููู",
    "submit_review": "ุฅุฑุณุงู ุงูุชูููู",
    "update_review": "ุชุญุฏูุซ ุงูุชูููู",
    "delete_review": "ุญุฐู ุงูุชูููู",
    "rating_required": "ุงูุชูููู ูุทููุจ",
    "comment_placeholder": "ุดุงุฑู ุชุฌุฑุจุชู ูุน ูุฐุง ุงูููุงู...",
    "comment_min_length": "ูุฌุจ ุฃู ูููู ุงูุชุนููู 10 ุฃุญุฑู ุนูู ุงูุฃูู",
    "stars": "ูุฌูู",
    "star": "ูุฌูุฉ",
    "excellent": "ููุชุงุฒ",
    "very_good": "ุฌูุฏ ุฌุฏุงู",
    "good": "ุฌูุฏ",
    "fair": "ููุจูู",
    "poor": "ุถุนูู"
  }
}
```

### ๐ ุงูุฃูุงู

1. **ุงูุชุญูู ูู ุงููุณุชุฎุฏู**: ุฌููุน ุงูุนูููุงุช ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู
2. **ููููุฉ ุงูุชูููู**: ุงููุณุชุฎุฏู ููููู ุชุนุฏูู/ุญุฐู ุชููููู ููุท
3. **ุชูููู ูุงุญุฏ ููู ูุณุชุฎุฏู**: ูุง ูููู ุชูููู ููุณ ุงูุนูุงุฑ ูุฑุชูู
4. **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ุงูุชุญูู ูู ุตุญุฉ ุงูุชูููู ูุงูุชุนููู

### ๐ฑ ุงูุงุณุชุฎุฏุงู

#### ูู ุตูุญุฉ ุงูุนูุงุฑ
```tsx
<ReviewsSection
  listingId={listing.id}
  currentUser={currentUser}
  isOwner={isOwner}
/>
```

#### ูู ุจุทุงูุฉ ุงูุนูุงุฑ
```tsx
<ReviewSummary listingId={data.id} size="sm" />
```

### ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

#### ุงูููุฒุงุช ุงูููุชุฑุญุฉ
1. **ุชุตููุฉ ุงูุชููููุงุช** (ุญุณุจ ุงูุชููููุ ุงูุชุงุฑูุฎ)
2. **ุฑุฏูุฏ ุงููุถูู** ุนูู ุงูุชููููุงุช
3. **ุตูุฑ ูู ุงูุถููู** ูู ุงูุชููููุงุช
4. **ุชููููุงุช ููุตูุฉ** (ุงููุธุงูุฉุ ุงููููุนุ ุฅูุฎ)
5. **ุฅุดุนุงุฑุงุช** ุนูุฏ ุชููู ุชูููู ุฌุฏูุฏ
6. **ุชุตุฏูุฑ ุงูุชููููุงุช** (PDF, Excel)

#### ุงูุชุญุณููุงุช ุงูุชูููุฉ
1. **ุงูุชุฎุฒูู ุงููุคูุช** ููุชููููุงุช
2. **Pagination** ููุชููููุงุช ุงููุซูุฑุฉ
3. **Real-time updates** ุจุงุณุชุฎุฏุงู WebSockets
4. **ุชุญููู ุงูุชููููุงุช** ูุฅุญุตุงุฆูุงุช ููุตูุฉ

### ๐ ูุงุฆูุฉ ุงููููุงุช

```
app/
โโโ components/
โ   โโโ StarRating.tsx
โ   โโโ ReviewForm.tsx
โ   โโโ ReviewCard.tsx
โ   โโโ ReviewsSection.tsx
โ   โโโ ReviewSummary.tsx
โโโ api/
โ   โโโ listings/[listingId]/reviews/
โ   โ   โโโ route.ts
โ   โโโ reviews/[reviewId]/
โ       โโโ route.ts
โโโ types/
    โโโ index.ts (SafeReview type)

prisma/
โโโ schema.prisma (Review model)

locales/
โโโ en/common.json (reviews translations)
โโโ ar/common.json (reviews translations)
```

### ๐ง ุงูุชุซุจูุช ูุงูุชุดุบูู

1. **ุชุทุจูู Migration**:
   ```bash
   npx prisma migrate dev --name add_reviews
   ```

2. **ุชุญุฏูุซ Prisma Client**:
   ```bash
   npx prisma generate
   ```

3. **ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู**:
   ```bash
   npm run dev
   ```

### ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

#### ูุดุงูู ุดุงุฆุนุฉ
1. **ุฎุทุฃ ูู Migration**: ุชุฃูุฏ ูู ุชุญุฏูุซ Prisma Client
2. **ุฎุทุฃ ูู ุงูุชุฑุฌูุฉ**: ุชุญูู ูู ูุฌูุฏ ุฌููุน ููุงุชูุญ ุงูุชุฑุฌูุฉ
3. **ุฎุทุฃ ูู API**: ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฑุณูุฉ

#### ุณุฌูุงุช ุงูุชุตุญูุญ
- ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ูู console
- ุฃุฎุทุงุก API ูุณุฌูุฉ ูู ุงูุฎุงุฏู
- ุฃุฎุทุงุก ุงูุชุฑุฌูุฉ ูุณุฌูุฉ ูู ุงููุชุตูุญ

