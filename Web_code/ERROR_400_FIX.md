# ๐ง ุญู ูุดููุฉ ุฎุทุฃ 400 ูู ุตูุญุฉ ุงููุฌุงุญ

## ๐จ ุงููุดููุฉ
ูุงู ูุญุฏุซ ุฎุทุฃ `AxiosError: Request failed with status code 400` ูู ุตูุญุฉ ุงููุฌุงุญ ุจุนุฏ ุธููุฑ ุงููุงุชูุฑุฉุ ููุง ูุนูู:
- ูุดููุฉ ูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุฅูู API ุงูุชุฃููุฏ
- ุนุฏู ูุฌูุฏ metadata ูู ุฌูุณุฉ Stripe
- ูุดููุฉ ูู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. **ุฅุถุงูุฉ Logging ูุญุณู ูู API ุงูุชุฃููุฏ**
```typescript
// ูู app/api/reservations/confirm/route.ts
console.log("Received sessionId:", sessionId);
console.log("Stripe session retrieved:", {
  id: session.id,
  payment_status: session.payment_status,
  metadata: session.metadata
});
console.log("Session metadata:", {
  listingId, userId, startDate, endDate, totalPrice
});
```

### 2. **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุตูุญุฉ ุงููุฌุงุญ**
```typescript
// ูู app/payment/success/page.tsx
const [error, setError] = useState<string | null>(null);

// ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
if (err?.response?.data?.error) {
  errorMessage = err.response.data.error;
} else if (err?.response?.status === 404) {
  errorMessage = "ูู ูุชู ุงูุนุซูุฑ ุนูู ุฌูุณุฉ ุงูุฏูุน";
} else if (err?.response?.status === 400) {
  errorMessage = "ุจูุงูุงุช ุงูุญุฌุฒ ุบูุฑ ุตุญูุญุฉ";
}
```

### 3. **ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู**
```typescript
if (error) {
  return (
    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
      <p className="text-yellow-800 font-medium">
        ููุงุญุธุฉ: {error}
      </p>
      <p className="text-yellow-700 text-sm mt-2">
        ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจุงู ูุชุฃููุฏ ุงูุญุฌุฒ
      </p>
    </div>
  );
}
```

### 4. **ุนุฏู ุงูุชูุฌูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ูู ุญุงูุฉ ุงูุฎุทุฃ**
```typescript
// ุจุฏูุงู ูู router.push("/") ูู ุญุงูุฉ ุงูุฎุทุฃ
// ูุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
setError(errorMessage);
```

## ๐ก๏ธ ุทุจูุงุช ุงูุญูุงูุฉ ุงููุถุงูุฉ

### **ุงูุทุจูุฉ ุงูุฃููู: Logging ูุญุณู**
- โ ุชุณุฌูู sessionId ุงููุณุชูู
- โ ุชุณุฌูู ุจูุงูุงุช ุฌูุณุฉ Stripe
- โ ุชุณุฌูู metadata
- โ ุชุณุฌูู ุงูุจูุงูุงุช ุงูููููุฏุฉ

### **ุงูุทุจูุฉ ุงูุซุงููุฉ: ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- โ ุนุฏู ุงูุชูุฌูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูููุณุชุฎุฏู
- โ ุชุณุฌูู ุงูุฃุฎุทุงุก ูู console

### **ุงูุทุจูุฉ ุงูุซุงูุซุฉ: ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**
- โ ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ุงูุฏูุน
- โ ุนุฑุถ ุชูุงุตูู ุงูุฏูุน
- โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
- โ ุฅุฑุดุงุฏุงุช ูููุณุชุฎุฏู

## ๐งช ุงูุงุฎุชุจุงุฑ

### **ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:**
1. **ุฏูุน ูุงุฌุญ**: ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ
2. **ุฎุทุฃ 400**: ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
3. **ุจูุงูุงุช ููููุฏุฉ**: ุชุณุฌูู ุงูุจูุงูุงุช ุงูููููุฏุฉ
4. **ุฎุทุฃ ูู metadata**: ูุนุงูุฌุฉ ุตุญูุญุฉ

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**
- โ ุนุฏู ุญุฏูุซ ุฃุฎุทุงุก ุบูุฑ ูุชููุนุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- โ ุชุณุฌูู ุดุงูู ููุฃุฎุทุงุก

## ๐ ููุงุฑูุฉ ุงูุญููู

| ุงูุญู | ุงููุนุงููุฉ | ุงูุชุนููุฏ | ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู |
|------|-----------|---------|-----------------|
| Logging ูุญุณู | โญโญโญโญโญ | ููุฎูุถ | ููุชุงุฒ |
| ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก | โญโญโญโญโญ | ูุชูุณุท | ููุชุงุฒ |
| ุฑุณุงุฆู ูุงุถุญุฉ | โญโญโญโญโญ | ููุฎูุถ | ููุชุงุฒ |
| ุนุฏู ุงูุชูุฌูู | โญโญโญโญ | ููุฎูุถ | ุฌูุฏ |

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุชุทุจูู **ุญู ุดุงูู** ูุถูู:
- **ุชุญุฏูุฏ ุฏููู ูุณุจุจ ุงูุฎุทุฃ 400**
- **ูุนุงูุฌุฉ ุตุญูุญุฉ ููุฃุฎุทุงุก**
- **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**
- **ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ**

ุงููุธุงู ุงูุขู **ูุญุตู ูู ุฃุฎุทุงุก 400** ููุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู! ๐ก๏ธโจ

---

**ุชู ุชุทููุฑ ูุฐุง ุงูุญู ุจูุงุณุทุฉ ูุฑูู Cozy Project** ๐

